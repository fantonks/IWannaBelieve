# Приёмная кампания — конкурсные списки и проходные баллы

> Веб-приложение для приёмной кампании: конкурсные списки по ОП, проходные баллы, даты комиссий, загрузка и экспорт Excel по датам (01.08–04.08), учёт абитуриентов (Next.js, MySQL).

Веб-приложение для работы с конкурсными списками абитуриентов по образовательным программам (ОП), проходными баллами и датами комиссий.

## Возможности

- **Конкурсные списки** — просмотр по ОП и дате, колонка ФИО, загрузка/экспорт Excel по датам (01.08, 02.08, 03.08, 04.08)
- **Анализ поступления** — проходные баллы по датам комиссий
- **Абитуриенты** — добавление вручную, списком (CSV), файлом (CSV/Excel), рандомайзер (100–200 записей), экспорт в Excel
- **Статистика** — сводка по баллам и приоритетам
- **MySQL** — общая БД для всех; при отсутствии MySQL — fallback на файл `data/applicants.json`

## Технологии (для документации)

**Графический интерфейс (клиент):**
- **Next.js 16** (App Router) — фреймворк и маршрутизация
- **React 19** — интерфейс, компоненты, состояние
- **Tailwind CSS 4** — стили, вёрстка, адаптивность
- **Radix UI** — доступные примитивы (диалоги, выпадающие списки, формы, табы и др.)
- **Lucide React** — иконки
- **Recharts** — графики на странице статистики
- **date-fns** — форматирование дат

**Серверная часть:**
- **Next.js API Routes** (App Router) — REST-API: `/api/applicants`, `/api/lists`, `/api/programs`, `/api/admission`, `/api/stats` и др.
- **Node.js** — среда выполнения
- **xlsx** — формирование и разбор Excel (загрузка списков, экспорт по датам)
- **dotenv** — загрузка переменных из `.env.local` (в скриптах)

**База данных:**
- **MySQL 8** (или MariaDB) — основное хранилище: таблицы `programs`, `applicants`, `list_applicants`, `competitive_list_entries`
- **mysql2** — драйвер для Node.js (подключение, запросы)
- **Fallback** — при недоступности MySQL данные абитуриентов пишутся в JSON-файл `data/applicants.json`

**Прочее:** TypeScript, ESLint, PostCSS.

## Требования

- **Node.js** 18+
- **npm** или pnpm
- Опционально: **MySQL** 8+ для конкурсных списков и единого хранилища

## Установка и запуск

```bash
# Клонирование (после загрузки на Git)
git clone <url-репозитория>
cd <папка-проекта>

# Установка зависимостей
npm install

# Копирование настроек БД
cp .env.example .env.local
# Отредактируйте .env.local: MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE

# Инициализация БД (создание таблиц)
npm run db:init

# Запуск в режиме разработки (порт 4000)
npm run dev
```

Откройте в браузере: **http://localhost:4000**

## Скрипты

| Команда | Описание |
|--------|----------|
| `npm run dev` | Запуск dev-сервера (порт 4000) |
| `npm run build` | Сборка для production |
| `npm run start` | Запуск production-сервера |
| `npm run db:init` | Создание БД и таблиц (MySQL) |
| `npm run seed:lists` | Генерация 100–200 тестовых абитуриентов в конкурсные списки (нужен MySQL) |

**Windows:** для быстрого запуска рандомайзера можно использовать `run-randomize.bat` (устанавливает зависимости и запускает `seed:lists`).

## Структура БД (MySQL)

- **programs** — ОП с датами комиссий (ПМ 01.08, ИВТ 02.08, ИТСС 03.08, ИБ 04.08)
- **applicants** — абитуриенты (ФИО, баллы, приоритет, согласие, программа)
- **list_applicants** — ФИО для записей конкурсных списков
- **competitive_list_entries** — строки конкурсных списков по ОП и дате

Схема: `sql/schema.sql`, миграция дат: `sql/migrate-commission-date.sql`.

## Экспорт Excel

- **Конкурсные списки:** на странице «Конкурсные списки» — кнопки по датам (01.08, 02.08, 03.08, 04.08) и «Все даты». В файле есть колонка ФИО.
- **Список абитуриентов:** страница «Добавить абитуриентов» / «Список абитуриентов» — «Экспорт в Excel».

## Переменные окружения (.env.local)

| Переменная | Описание |
|------------|----------|
| MYSQL_HOST | Хост MySQL (по умолчанию localhost) |
| MYSQL_PORT | Порт (по умолчанию 3306) |
| MYSQL_USER | Пользователь |
| MYSQL_PASSWORD | Пароль |
| MYSQL_DATABASE | Имя БД (admission_analysis) |

## Подготовка к деплою

1. Убедитесь, что путь к проекту не содержит кириллицу (иначе возможны ошибки сборки).
2. Выполните `npm run build`.
3. Для production: `npm run start` или разверните на Vercel/другом хостинге с поддержкой Node.js.

## Загрузка на Git

Запусти **`PUSH.bat`** — добавит файлы, сделает коммит и push. При первом разе: `git remote add origin https://github.com/ЛОГИН/РЕПО.git`, затем снова PUSH.bat.

Подробнее: **GIT_FIX.md**.

## Лицензия

Приватный учебный проект.
